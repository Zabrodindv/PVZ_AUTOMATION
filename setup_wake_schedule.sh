#!/bin/bash
#
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è Mac –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
#
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Mac –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –≤ 06:55 MSK –∫–∞–∂–¥—ã–π –¥–µ–Ω—å,
# –¥–∞–∂–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–æ–π –∫—Ä—ã—à–∫–µ. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —É—Ç—Ä–µ–Ω–Ω–∏—Ö –∑–∞–¥–∞—á Late Opening.
#

echo "=== –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è Mac ==="
echo ""
echo "üìÖ –¢–µ–∫—É—â–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–π:"
pmset -g sched
echo ""
echo "---"
echo ""
echo "üîß –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:"
echo "   Mac –±—É–¥–µ—Ç –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 06:55 MSK"
echo "   (–∑–∞ 5 –º–∏–Ω—É—Ç –¥–æ Late Opening 0900 –≤ 07:00)"
echo ""
echo "‚ö†Ô∏è  –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ pmset:"
echo "   pmset repeat –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –û–î–ò–ù –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è wake event"
echo "   –í—ã–±—Ä–∞–Ω–æ —É—Ç—Ä–µ–Ω–Ω–µ–µ –≤—Ä–µ–º—è (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç 3 –∑–∞–¥–∞—á–∏: 07:00, 08:00, 09:00)"
echo "   –í–µ—á–µ—Ä–Ω–µ–µ –≤—Ä–µ–º—è (19:55) –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —á–µ—Ä–µ–∑ pmset repeat"
echo ""
echo "–ö–æ–º–∞–Ω–¥–∞:"
echo "   sudo pmset repeat wake MTWRFSU 06:55:00"
echo ""
read -p "–í—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É? (y/n): " confirm

if [[ $confirm == "y" || $confirm == "Y" ]]; then
    echo ""
    echo "–í—ã–ø–æ–ª–Ω—è—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É (–ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å sudo)..."
    sudo pmset repeat wake MTWRFSU 06:55:00

    if [ $? -eq 0 ]; then
        echo ""
        echo "‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ!"
        echo ""
        echo "üìÖ –ù–æ–≤–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:"
        pmset -g sched
        echo ""
        echo "üí° –í–∞–∂–Ω–æ:"
        echo "   - Mac –±—É–¥–µ—Ç –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 06:55 MSK"
        echo "   - –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–æ–π –∫—Ä—ã—à–∫–µ"
        echo "   - –ü–æ–∫—Ä—ã–≤–∞–µ—Ç Late Opening –∑–∞–¥–∞—á–∏ (07:00, 08:00, 09:00 MSK)"
        echo "   - –î–ª—è –≤–µ—á–µ—Ä–Ω–∏—Ö –∑–∞–¥–∞—á: –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ –∫—Ä—ã—à–∫—É –∏–ª–∏ –¥–µ—Ä–∂–∏—Ç–µ Mac –≤–∫–ª—é—á–µ–Ω–Ω—ã–º"
        echo "   - –î–ª—è –æ—Ç–º–µ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: sudo pmset repeat cancel"
        echo ""
    else
        echo ""
        echo "‚ùå –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ sudo."
    fi
else
    echo ""
    echo "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞."
    echo "–î–ª—è —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
    echo "   sudo pmset repeat wake MTWRFSU 06:55:00"
fi

echo ""
echo "üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: SCHEDULE.md (—Ä–∞–∑–¥–µ–ª '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ Mac')"
